<link rel="import" href="../bower_components/polymer/polymer.html">
<!-- <link rel="import" href="toolbox-element.html"> -->
<link rel="import" href="icon-folder-element.html">

<dom-module id="desktop-system-element">
    <template>
        <style>

            .desktopDom {
                position: absolute;
                top: 70px;
                width: 500px;
                height: 500px;
                background-color: #EAEAEA;
                border: 1px solid black;

            }

        </style>
        <div class="desktopDom">
        </div>
    </template>
</dom-module>

<script>

    Polymer({
        is: "desktop-system-element",
        //
        //
        ready: function() {

            this.addEventListener('fireicon', function(e) {
                var iconN = e.detail.numbers;
                var desktopDom = this.$$('.desktopDom');
                for(var i=0; i < iconN; i++) {
                    var icon = document.createElement('icon-folder-element');
                    var icondom = icon.querySelector('.icondom');

                    Polymer.dom(desktopDom).appendChild(icon);
                    var icondomPosition = [
                        Math.floor(Math.random() * (desktopDom.getBoundingClientRect().width - 35)),
                        Math.floor(Math.random() * (desktopDom.getBoundingClientRect().height - 35))
                    ];
                    icondom.style.left = (icondom.getBoundingClientRect().left - desktopDom.getBoundingClientRect().left + icondomPosition[0]) + 'px';
                    icondom.style.top = (icondom.getBoundingClientRect().top - desktopDom.getBoundingClientRect().top + icondomPosition[1]) + 'px';
                }
            });

            // this.addEventListener('firefolder', function(e) {
            //     var folderN = e.detail.numbers;
            //     var desktopDom = this.$$('.desktopDom');
            //     for(var i=0; i < folderN; i++) {
            //         var folder = document.createElement('icon-folder-element');
            //         var folderdom = folder.querySelector('.folderdom');
            //         Polymer.dom(desktopDom).appendChild(folder);
            //         var folderdomPosition = [
            //             Math.floor(Math.random() * (desktopDom.getBoundingClientRect().width - 35)),
            //             Math.floor(Math.random() * (desktopDom.getBoundingClientRect().height - 35))
            //         ];
            //         folderdom.style.left = (folderdom.getBoundingClientRect().left - desktopDom.getBoundingClientRect().left + folderdomPosition[0]) + 'px';
            //         folderdom.style.top = (folderdom.getBoundingClientRect().top - desktopDom.getBoundingClientRect().top + folderdomPosition[1]) + 'px';
            //     }
            // });
        }
    });

</script>
